<!-- This script partial should be included just before </body> tag for readme html page -->
<script>
    enableRunkit();
    generateArchivalDocsList();

    // Convert code examples to the runkit containers
    function enableRunkit() {
        const src = document.createElement('script');
        document.head.appendChild(src);
        src.onload = () => {
            const runkitContainers = document.getElementsByClassName('runkit-container');
            Array.from(runkitContainers).forEach((node) => {
                const source = node.innerText;
                node.innerText = '';
                RunKit.createNotebook({element: node, source: source});
            });
        };
        src.src = 'https://embed.runkit.com';
    }

    async function generateArchivalDocsList() {
        const response = await fetch('https://api.github.com/repos/thefill/jetli/contents/archive?ref=gh-pages');
        const data = await response.json();
        let htmlString = '<ul>';
        for (let file of data) {
            htmlString += `<li><a href="${file.path}">API for Jetli v${file.name}</a></li>`;
        }
        htmlString += '</ul>';
        document.querySelector('.tsd-panel.tsd-typography').innerHTML += htmlString;
    }

</script>
